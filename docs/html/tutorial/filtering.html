<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Filtering &#8212; nutsflow 1.0.6 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data transformation" href="transforming.html" />
    <link rel="prev" title="Printing and Debugging" href="debugging.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="filtering">
<span id="id1"></span><h1>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h1>
<p>Apart from <a class="reference internal" href="sources.html#sources"><span class="std std-ref">reading</span></a> and <a class="reference internal" href="sinks.html#sinks"><span class="std std-ref">writing</span></a>,
<a class="reference internal" href="#filtering"><span class="std std-ref">filtering</span></a> and <a class="reference internal" href="transforming.html#transforming"><span class="std std-ref">transforming</span></a>
are the most common operations within data flows. This
sections presents various nuts used to filter, partition
or group data.</p>
<div class="section" id="filter">
<h2>Filter<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h2>
<p>A common task is to remove elements from a data flow. <strong>nuts-flow</strong>
provides <code class="docutils literal"><span class="pre">Filter</span></code> and <code class="docutils literal"><span class="pre">FilterFalse</span></code> for this purpose. In the
following example all number greater than five are extracted:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsflow</span> <span class="k">import</span> <span class="o">*</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[6, 7, 8, 9]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">FilterFalse</span></code> is simply the negation of <code class="docutils literal"><span class="pre">Filter</span></code> and extracts
number smaller or equal to five:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">FilterFalse</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[0, 1, 2, 3, 4, 5]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Filter</span></code> and <code class="docutils literal"><span class="pre">FilterFalse</span></code> take a predicate (Lambda) function that
must return a boolean value. If the predicate function is very simple
it can be written shorter using <a class="reference internal" href="underscore.html#underscore"><span class="std std-ref">underscore syntax</span></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutsflow</span> <span class="k">import</span> <span class="n">_</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Filter</span><span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[6, 7, 8, 9]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">FilterFalse</span><span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[0, 1, 2, 3, 4, 5]</span>
</pre></div>
</div>
</div>
<div class="section" id="partition">
<h2>Partition<a class="headerlink" href="#partition" title="Permalink to this headline">¶</a></h2>
<p>If both &#8216;sides&#8217; of a filter, the elements accepted <strong>and</strong> the elements
rejected, are wanted the <code class="docutils literal"><span class="pre">Partition</span></code> nut can be used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">greater</span><span class="p">,</span> <span class="n">smaller</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Partition</span><span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">greater</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[6, 7, 8, 9]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">smaller</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[0, 1, 2, 3, 4, 5]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">odd</span><span class="p">,</span> <span class="n">even</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Partition</span><span class="p">(</span><span class="n">_</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">odd</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[1, 3, 5, 7, 9]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">even</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[0, 2, 4, 6, 8]</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">Partition</span></code> returns a tuple containing two iterators.</p>
</div>
<div class="section" id="groupby">
<h2>GroupBy<a class="headerlink" href="#groupby" title="Permalink to this headline">¶</a></h2>
<p>Similar, but more powerful than <code class="docutils literal"><span class="pre">Partition</span></code> is <code class="docutils literal"><span class="pre">GroupBy</span></code>, which allows
to group the elements of the flow according to a key function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">GroupBy</span><span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[(False, [0, 1, 2, 3, 4, 5]), (True, [6, 7, 8, 9])]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">GroupBy</span></code> returns an iterator over the groups, where each group is
a tuple with the result of the key function first and the elements of
the group second. If the result of the key function is not required
the <em>nokey</em> flag can be set to <code class="docutils literal"><span class="pre">True</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">GroupBy</span><span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">nokey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[[0, 1, 2, 3, 4, 5], [6, 7, 8, 9]]</span>
</pre></div>
</div>
<p>In contrast to <code class="docutils literal"><span class="pre">Partition</span></code>, <code class="docutils literal"><span class="pre">GroupBy</span></code> is not limited to a boolean
key function. For instance, to group by the remainder of the division
by 3 simply call</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">GroupBy</span><span class="p">(</span><span class="n">_</span> <span class="o">%</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[(0, [0, 3, 6, 9]), (1, [1, 4, 7]), (2, [2, 5, 8])]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">GroupBy</span></code> loads all data in memory and should be avoided for large data sets.
If the data is sorted <code class="docutils literal"><span class="pre">GroupBySorted</span></code> can be used instead.</p>
</div>
<div class="section" id="takewhile-and-dropwhile">
<h2>TakeWhile and DropWhile<a class="headerlink" href="#takewhile-and-dropwhile" title="Permalink to this headline">¶</a></h2>
<p>Occasionally, it is necessary to run a data flow until a certain
condition is met. <code class="docutils literal"><span class="pre">TakeWhile(func)</span></code> takes elements from the
iterable as long as the predicate function is true.
In the following example all number are collected until
the <strong>first</strong> negative number is encountered:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">TakeWhile</span><span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[2, 1]</span>
</pre></div>
</div>
<p>Similarily, <code class="docutils literal"><span class="pre">DropWhile(func)</span></code> skips all elements while the predicate function
is true and returns the remainder of the iterable:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">DropWhile</span><span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">Collect</span><span class="p">()</span>
<span class="go">[-1, 3, 4, -1]</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Filtering</a><ul>
<li><a class="reference internal" href="#filter">Filter</a></li>
<li><a class="reference internal" href="#partition">Partition</a></li>
<li><a class="reference internal" href="#groupby">GroupBy</a></li>
<li><a class="reference internal" href="#takewhile-and-dropwhile">TakeWhile and DropWhile</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="introduction.html">Tutorial</a><ul>
      <li>Previous: <a href="debugging.html" title="previous chapter">Printing and Debugging</a></li>
      <li>Next: <a href="transforming.html" title="next chapter">Data transformation</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorial/filtering.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, IBM.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/tutorial/filtering.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>